.. _ei_data_forwarder_sample:

Edge Impulse data forwarder
###########################

.. contents::
   :local:
   :depth: 2

The Edge Impulse data forwarder sample demonstrates usage of `Edge Impulse data forwarder`_ protocol to provide sensor data to `Edge Impulse studio`_.
Sample forwards simulated accelerometer data generated by the :file:`sensor_sim` driver available in |NCS|.
See `Edge Impulse`_ webpage for more information about the Edge Impulse platform.

Requirements
************

The sample supports the following development kits:

.. table-from-rows:: /includes/sample_board_rows.txt
   :header: heading
   :rows: nrf9160dk_nrf9160ns, nrf52dk_nrf52832, nrf52840dk_nrf52840

Overview
********

The sample periodically performs the following operations:

* Reads data from sensor.
  The sample reads simulated acceleration measurements for X, Y and Z axis.
* Forwards the data through UART using protocol specified by `Edge Impulse data forwarder`_.

.. note::
   The sample uses UART only to forward the sensor data.
   For this reason, sample logs are provided through RTT, unlike in other samples.

Configuration
*************

|config|

Setup
=====

Before running the sample, you must:

1. Prepare your own project using `Edge Impulse studio`_.
   See the requirements section of :ref:`ei_ncs` for a guide.
2. Install Edge Impulse command line tools following the `Edge Impulse CLI installation guide`_.
   The ``edge-impulse-data-forwarder`` is used to forward the data received from the device through UART to `Edge Impulse studio`_.

Building and running
********************

.. |sample path| replace:: :file:`samples/ei_data_forwarder`

.. include:: /includes/build_and_run.txt

Testing
=======

After programming the sample to your development kit, test it by performing the following steps:

1. Run the ``edge-impulse-data-forwarder`` tool.
   The tool connects the device to your Edge Impulse project.
   See the `Edge Impulse data forwarder`_ documentation for a guide.
#. Trigger sampling data from the device using `Edge Impulse studio`_.
   Sampling can be triggered under ``Data acquisition`` tab.
#. Observe received sample data in `Edge Impulse studio`_.
   For default sample configuration, you should observe sine waves.

Dependencies
************

This sample uses the following |NCS| drivers:

* :file:`drivers/sensor/sensor_sim`

In addition, it uses the following Zephyr drivers:

* :ref:`zephyr:uart_api`
